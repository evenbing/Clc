@model Clc.Web.Models.Works.AffairsViewModel;
@{
    Layout = "~/Views/Shared/_WorkLayout.cshtml";
}

@section workScripts
{
    <environment names="Development">
        <script src="~/view-resources/Views/Affairs/Index.js" asp-append-version="true"></script>
    </environment>

    <environment names="Staging,Production">
        <script src="~/view-resources/Views/Affairs/Index.min.js" asp-append-version="true"></script>
    </environment>
}

<div class="easyui-layout" fit="true">
    <!-- BEGIN of Affair panel -->
    <div data-options="region:'north', split:true, border:false" style="min-height:120px; height:40%">
        <div id="tb">
            任务日期: <input id="dd" class="easyui-datebox" readonly="true" style="width:120px">
            &nbsp;明天<input id="tomorror" class="easyui-checkbox">
            <a name="reload" href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-reload" plain="true">刷新</a>
            <a name="add" href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-add" plain="true">添加</a>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <a name="activate" href="javascript:void(0)" class="easyui-linkbutton">激活</a>
            <a name="back" href="javascript:void(0)" class="easyui-linkbutton">退回</a>
            <a name="createFrom" href="javascript:void(0)" class="easyui-linkbutton">从指定日期生成</a>
            <input id="fromDate" class="easyui-datebox" style="width:120px">
        </div>
        <table id="dg" class="easyui-datagrid" toolbar="#tb"
                fit="true" fitColumns="true" rownumbers="true" singleSelect="false" striped="true" sortName="startTime">               
            <thead>
                 <tr>
                    <th field="ck" checkbox="true"></th>
                    <th field="carryoutDate" width="80" align="center" formatter="$.dateFormatter">日期</th>
                    <th field="status" width="50" align="center">状态</th>
                    <th field="workplaceName" width="80">任务地点</th>
                    <th field="startTime" width="80">开始时间</th>
                    <th field="endTime" width="80">结束时间</th>
                    <th field="isTomorrow" width="60">明天结束</th>
                    <th field="remark" width="100">备注</th>
                    <th field="createWorkerName" width="100">创建人</th>
                    <th field="_operate" width="50" align="center" formatter="affairOperate">操作</th>
                </tr>
            </thead>
        </table>
    </div>
    <!-- END of affair panel -->
    <div data-options="region:'center'">
       <div class="easyui-tabs" data-options="fit:true, border:false">
            <!-- Begin of Worker Tab -->
            <div title="人员列表" style="display:none;">
                <div id="tbWorker">
                    <a name="reload" href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-reload" plain="true">刷新</a>
                    <a name="add" href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="">添加</a>
                </div>
                <table id="dgWorker" class="easyui-datagrid" toolbar="#tbWorker"
                        fit="true" fitColumns="true" rownumbers="true" singleSelect="true" striped="true">
                    <thead>
                        <tr>
                            <th field="workerCn" width="50" align="center" >人员编号</th>
                            <th field="workerName" width="50" align="center" >人员姓名</th>
                            <th field="workRoleName" width="50">工作角色</th>
                            <th field="_operate" width="50" align="center" formatter="workerOperate">操作</th>
                        </tr>
                    </thead>
                </table>
            </div>
            <!-- End of Worker Tab -->
            <!-- Begin of Event Tab -->
            <div title="任务事件" style="display:none;">
                <div id="tbEvent">
                    <a name="reload" href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-reload" plain="true">刷新</a>
                </div>
                <table id="dgEvent" class="easyui-datagrid" toolbar="#tbEvent"
                        fit="true" fitColumns="true" rownumbers="true" singleSelect="true" striped="true" sortName="eventTime">
                    <thead>
                        <tr>
                            <th field="eventTime" width="50" align="center" formatter="$.datetimeFormatter">发生时间</th>
                            <th field="name" width="50" align="center" >名称</th>
                            <th field="description" width="50">具体描述</th>
                            <th field="issurer" width="50" align="center">创建者</th>
                        </tr>
                    </thead>
                </table>
            </div>
            <!-- End of Event Tab -->
        </div>
    </div>
</div>

@*主弹窗*@
<div id="dlg" class="easyui-dialog" closed="true" modal="true" buttons="#dlg-buttons" style="width: 400px; padding: 10px;">
    <form id="fm" method="post" novalidate>
        <table class="edit-tbl">
            <input id="id" name="id" type="hidden">
            <input id="carryoutDate" name="carryoutDate" type="hidden">
            <input name="status" type="hidden">
            <tr>
                <th><Label for="workplaceId">任务地点:</Label></th>
                <td><input id = "workplace" name="workplaceId" class="easyui-combobox" data-options="required: true" style="width:100%"></td>
            </tr>
            <tr>
                <th><Label for="startTime">开始时间:</Label></th>
                <td><input name="startTime" class="easyui-timespinner" data-options="required: true" style="width:100%"></td>
            </tr>
            <tr>
                <th><Label for="endTime">结束时间:</Label></th>
                <td><input name="endTime" class="easyui-timespinner" data-options="required: true" style="width: 100%"></td>
            <tr>
                <th><label for="isTomorrow">明天结束: </label></th>
                <td><input name="isTomorrow" class="easyui-switchbutton" data-options="height:24,onText:'是',offText:'否'"></td>
            </tr>
            <tr>
                <th><Label for="remark">备注:</Label></th>
                <td><input name="remark" class="easyui-textbox" style="width: 100%"></td>
            </tr>
        </table>
    </form>
</div>
<div id="dlg-buttons">
    <a name="save" href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-save">保存</a>
    <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-cancel" onclick="$('#dlg').dialog('close')">取消</a>
</div>

@*Worker弹窗*@
<div id="dlgWorker" class="easyui-dialog" closed="true" modal="true" buttons="#dlgWorker-buttons" align="center" style="width: 400px; padding: 10px;">
    <form id="fmWorker" method="post" novalidate>
        <table class="edit-tbl">
            <input id="workerId" name="id" type="hidden" >
            <input id="workerAffairId" name="affairId" type="hidden">
            <tr>
                <th><Label for="workRoleId">角色:</Label></th>
                <td><input id="workRole" name="workRoleId" class="easyui-combobox" data-options="required: true" style="width: 100%"></td>
            </tr>
            <tr>
                <th><Label for="workerId">人员:</Label></th>
                <td><input id="worker" name="workerId" class="easyui-combobox" data-options="required: true" style="width: 100%"></td>
            </tr>
        </table>
    </form>
</div>
<div id="dlgWorker-buttons">
    <a name="save" class="easyui-linkbutton" iconCls="icon-save">保存</a>
    <a href="javascript:void(0)" class="easyui-linkbutton" iconCls="icon-cancel" onclick="$('#dlgWorker').dialog('close')">取消</a>
</div>

