@using Clc.Fields
@{
    Layout = "~/Views/Shared/_CrudLayout.cshtml";
}

@section customScript
{
    <script type="text/javascript">
        crud.dgDefault.name = 'Workers';
        crud.dgDefault.sortName = 'cn';
        var title = abp.setting.get('VI.DepotTitleName');
        crud.dgDefault.columns = [[
            { field: "cn", title: "编号", width: 100, sortable: true },
            { field: "name", title: "名称", width: 100 },
            { field: "password", title: "微信登录密码", width: 80 },
            { field: "idCardNo", title: "ID卡号", width: 100 },         
            { field: "photo", title: "有否照片", width: 80, formatter: photoFormatter },
            { field: "finger", title: "有否指纹", width: 80, formatter: fingerFormatter },
            { field: "idNumber", title: "身份证", width: 100 },
            { field: "mobile", title: "手机号码", width: 100 },
            { field: "deviceId", title: "微信设备号", width: 100 },
            { field: "depotId", title: "所属"+title, width: 100, formatter: $.displayDepotText }
            { field: "isActive", title: "线路确认身份", width: 60 }
        ]];
        function photoFormatter(val, row, index) {
            if (row.photo.length > 0)
                return '(有)'
        }
        function fingerFormatter(val, row, index) {
            if (row.finger != null)
                return '(有)'
        }
    </script>
}

@*弹窗*@
<div id="dlg" class="easyui-dialog" closed="true" modal="true" buttons="#dlg-buttons" align="center" style="width: 800px; padding: 10px;">
    <form id="fm" class="easyui-form" method="post" novalidate>
        <table class="edit-tbl2">
            <input id="id" name="id" type="hidden">
            <tr>
                <th><label for="cn">编号：</label></th>
                <td><input name="cn" class="easyui-textbox" data-options="required:true, validType:'length[1, @Worker.MaxCnLength)]'" style="width: 100%"></td>
                <th><Label for="name">姓名:</Label></th>
                <td><input name="name" class="easyui-textbox" data-options="required:true, validType:'length[1, @Worker.MaxNameLength]'" style="width: 100%"></td>
            </tr>
            <tr>
                <th><Label for="password">登录密码:</Label></th>
                <td><input name="password" class="easyui-numberbox" data-options="validType:'length[1, @Worker.MaxPasswordLength]'" style="width: 100%"></td>
                <th><Label for="idCardNo">ID 卡号:</Label></th>
                <td><input name="idCardNo" class="easyui-textbox" data-options="validType:'length[2, @Worker.IDCardNoMaxLength]'" style="width: 100%"></td>
            </tr>
            <tr>
                <th><Label for="PhotoFile">照片:</Label></th>
                <td>
                    <img id="preview" alt="" src="" style="width:93px; height:110px;" />
                    <input id="photoFile" name="photoFile" type="file" onchange="$.setImagePreview('#preview', this)" />
                </td>
            </tr>
            <tr>
                <th><label for="finger">指纹：</label>
                </th>
                <td>
                    <input id="finger" name="finger" class="easyui-textbox" style="width: 100%" >
                    <a onclick="getFinger()" class="easyui-linkbutton">获取指纹</a>
                    <a onclick="validFinger()" class="easyui-linkbutton">验证指纹</a>
                </td>
            </tr>
            <tr>
                <th><Label for="idNumber">身份证:</Label></th>
                <td><input name="idNumber" class="easyui-textbox" data-options="validType:'length[@Worker.IDNumberLength, @Worker.IDNumberLength]'" style="width: 100%"></td>
            </tr>
             <tr>
                <th><Label for="mobile">手机号码:</Label></th>
                <td><input name="mobile" class="easyui-numberbox" data-options="validType:'length[@Worker.MobileLength, @Worker.MobileLength]'" style="width: 100%"></td>
            </tr>
            <tr>
                <th><label for="depotId">所属：</label></th>
                <td><select id="depotId" name="depotId" class="easyui-combobox" style="width: 100%" /></td>
                <th><label for="isActive">所属：</label></th>
                <td><input name="isActive" class="easyui-switchbutton" data-options="height:24,onText:'是',offText:'否'"></td>
            </tr>
        </table>
    </form>
</div>
